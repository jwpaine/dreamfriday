# A Tiny JSON Page Renderer in Go**
#### **Convert structured JSON into static HTML**
  
### **✨ Features**
**JSON-Driven:** Define your pages and components in JSON. This allowes them to be easily stored in a database, or generated by a LLM  
**Reusable Components:** Import and re-use internally defined or externally sourced components, and extend/override their attributes.
**CSS** Styling is parsed, aggregated and injected into the document head

---

## **📌 How It Works**
 takes input stream of JSON describing a page and outputs HTML

```go
    data, _ := os.ReadFile("./page.json")
    var siteData TPR.SiteData
    json.Unmarshal(data, &siteData)

    pageData := siteData.Pages["home"]
    components := siteData.Components
    // Stream final HTML
    TPR.RenderPage(pageData, components, os.Stdout)

```
---

## **📄 Page Structure**
A page consists of a list of **elements**:

```json
{
  "elements": [
    {...}, 
    {...}
  ]
}
```

### **🔹 Elements**
Each **element** includes:  
- `"type"` - The HTML element type (e.g., `div`, `a`, `header`).  
- `"attributes"` - Defines **props** and **CSS styles**.  
- `"style"` - Defines css key-value pairs
- `"elements"` - Nested child elements.  
- `"text"` - Inner content (if applicable).  
- `"import"` - References an internally or externally referenced **reusable component**.

```json
{
   "type": "string",
   "attributes": {},
   "elements": [],
   "style" : {},
   "text": "string",
   "import": "string"
}
```

---

## **🎨 Styling & Media Queries**
Elements support CSS attributes and media queries for responsiveness:

```json
{
  "style": {
    "key": "value",
    "media": {
      "max-width": {
        "735px": { "flex-direction": "column" }
      },
      "min-width": {
        "735px": { "height": "400px" }
      }
    }
  }
}
```

---

## **🔄 Reusable Components**
TJPR allows importing components using the `import` key.  
A **component** is a named set of page elements:

```json
{
  "component_name": {
    "elements": [ pageElement, pageElement ]
  }
}
```

---

## **🚀 Quick Example: A Box with a Link**
Let's define a page with a **div** containing a **link**:

```json
{
  "elements": [
    {
      "type": "div",
      "attributes": {
        "style": {
          "padding": "50px",
          "border": "1px solid black"
        }
      },
      "elements": [
        {
          "type": "a",
          "attributes": {
            "props": {
              "href": "https://github.com/jwpaine/TJPR"
            }
          },
          "text": "click me!"
        }
      ]
    }
  ]
}
```

### **🛠 Rendering the Page**
```go
pageData, _ := os.ReadFile("./page.json")
var siteData TJPR.SiteData
if err := json.Unmarshal(data, &siteData); err != nil {
    panic(err)
}

html, _ := TJPR.RenderJSONContent(nil, siteData, false)
os.WriteFile("index.html", []byte(html), 0644)
```

### **📌 Viewing the Page**
```bash
firefox index.html
```

![Example 1](examples/example1.png)

---

## **📌 Creating a Reusable Header Component**
### **1️⃣ Define `components.json`**
Let's create a simple **black header with white text**:

```json
{
  "header": {
    "elements": [{
      "type": "header",
      "attributes": {
        "style": {
          "background": "black",
          "padding": "2px"
        }
      },
      "elements": [{
        "type": "span",
        "attributes": {
          "style": {
            "color": "white",
            "font-size": "14px"
          }
        },
        "text": "My Header Component"
      }]
    }]
  }
}
```

---

### **2️⃣ Import the Header Component**
On your **page.json**, reference it using `"import": "header"`.

```json
{
  "elements": [
    {
      "type": "",
      "import": "header"
    },
    ...
  ]
}
```

![Example 2](examples/example2.png)

---

## **🎨 Extending Imported Component Styling**
You can **override and extend styles** when importing components:

```json
{
  "elements": [
    {
      "type": "",
      "attributes": {
        "style": {
          "padding": "20px",  // Override the original padding
          "border": "5px solid red"  // Add a new border style
        }
      },
      "import": "header"
    },
    ...
  ]
}
```

![Example 3](examples/example3.png)